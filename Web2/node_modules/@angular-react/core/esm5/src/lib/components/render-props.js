import { TemplateRef, ComponentRef } from '@angular/core';
import { createTemplateRenderer, createComponentRenderer, createHtmlRenderer, isRenderPropContext, } from '../renderer/renderprop-helpers';
function isRenderComponentOptions(x) {
    if (typeof x !== 'object') {
        return false;
    }
    var maybeRenderComponentOptions = x;
    return (maybeRenderComponentOptions.componentType != null &&
        maybeRenderComponentOptions.factoryResolver != null &&
        maybeRenderComponentOptions.injector != null);
}
function isRenderPropOptions(x) {
    if (typeof x !== 'object') {
        return false;
    }
    var maybeRenderPropOptions = x;
    return maybeRenderPropOptions.getProps && typeof maybeRenderPropOptions.getProps === 'function';
}
export function createInputJsxRenderer(input, ngZone, additionalProps) {
    if (input instanceof TemplateRef) {
        var templateRenderer_1 = createTemplateRenderer(input, ngZone, additionalProps);
        return function (context) { return templateRenderer_1.render(context); };
    }
    if (input instanceof ComponentRef) {
        var componentRenderer_1 = createComponentRenderer(input, additionalProps);
        return function (context) { return componentRenderer_1.render(context); };
    }
    if (input instanceof Function) {
        var htmlRenderer_1 = createHtmlRenderer(input, additionalProps);
        return function (context) { return htmlRenderer_1.render(context); };
    }
    if (isRenderComponentOptions(input)) {
        var componentType = input.componentType, factoryResolver = input.factoryResolver, injector = input.injector;
        var componentFactory = factoryResolver.resolveComponentFactory(componentType);
        var componentRef = componentFactory.create(injector);
        // Call the function again with the created ComponentRef<TContext>
        return createInputJsxRenderer(componentRef, ngZone, additionalProps);
    }
}
export function createRenderPropHandler(renderInputValue, ngZone, options) {
    if (isRenderPropContext(renderInputValue)) {
        return renderInputValue.render;
    }
    if (isRenderPropOptions(renderInputValue)) {
        return function (props, defaultRender) {
            return typeof defaultRender === 'function' ? defaultRender(renderInputValue.getProps(props)) : null;
        };
    }
    var renderer = (options && options.jsxRenderer) ||
        createInputJsxRenderer(renderInputValue, ngZone, options && options.additionalProps);
    return function (props, defaultRender) {
        if (!renderInputValue) {
            return typeof defaultRender === 'function' ? defaultRender(props) : null;
        }
        return renderer(props);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyLXByb3BzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFuZ3VsYXItcmVhY3QvY29yZS8iLCJzb3VyY2VzIjpbInNyYy9saWIvY29tcG9uZW50cy9yZW5kZXItcHJvcHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUE0QyxXQUFXLEVBQUUsWUFBWSxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQzVHLE9BQU8sRUFFTCxzQkFBc0IsRUFDdEIsdUJBQXVCLEVBQ3ZCLGtCQUFrQixFQUNsQixtQkFBbUIsR0FDcEIsTUFBTSxnQ0FBZ0MsQ0FBQztBQWN4QyxTQUFTLHdCQUF3QixDQUEwQixDQUFVO0lBQ25FLElBQUksT0FBTyxDQUFDLEtBQUssUUFBUSxFQUFFO1FBQ3pCLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7SUFFRCxJQUFNLDJCQUEyQixHQUFHLENBQXFDLENBQUM7SUFDMUUsT0FBTyxDQUNMLDJCQUEyQixDQUFDLGFBQWEsSUFBSSxJQUFJO1FBQ2pELDJCQUEyQixDQUFDLGVBQWUsSUFBSSxJQUFJO1FBQ25ELDJCQUEyQixDQUFDLFFBQVEsSUFBSSxJQUFJLENBQzdDLENBQUM7QUFDSixDQUFDO0FBU0QsU0FBUyxtQkFBbUIsQ0FBMEIsQ0FBVTtJQUM5RCxJQUFJLE9BQU8sQ0FBQyxLQUFLLFFBQVEsRUFBRTtRQUN6QixPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsSUFBTSxzQkFBc0IsR0FBRyxDQUFnQyxDQUFDO0lBQ2hFLE9BQU8sc0JBQXNCLENBQUMsUUFBUSxJQUFJLE9BQU8sc0JBQXNCLENBQUMsUUFBUSxLQUFLLFVBQVUsQ0FBQztBQUNsRyxDQUFDO0FBYUQsTUFBTSxVQUFVLHNCQUFzQixDQUNwQyxLQUFxQyxFQUNyQyxNQUFjLEVBQ2QsZUFBbUM7SUFFbkMsSUFBSSxLQUFLLFlBQVksV0FBVyxFQUFFO1FBQ2hDLElBQU0sa0JBQWdCLEdBQUcsc0JBQXNCLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxlQUFlLENBQUMsQ0FBQztRQUNoRixPQUFPLFVBQUMsT0FBaUIsSUFBSyxPQUFBLGtCQUFnQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBaEMsQ0FBZ0MsQ0FBQztLQUNoRTtJQUVELElBQUksS0FBSyxZQUFZLFlBQVksRUFBRTtRQUNqQyxJQUFNLG1CQUFpQixHQUFHLHVCQUF1QixDQUFDLEtBQUssRUFBRSxlQUFlLENBQUMsQ0FBQztRQUMxRSxPQUFPLFVBQUMsT0FBaUIsSUFBSyxPQUFBLG1CQUFpQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBakMsQ0FBaUMsQ0FBQztLQUNqRTtJQUVELElBQUksS0FBSyxZQUFZLFFBQVEsRUFBRTtRQUM3QixJQUFNLGNBQVksR0FBRyxrQkFBa0IsQ0FBQyxLQUFLLEVBQUUsZUFBZSxDQUFDLENBQUM7UUFDaEUsT0FBTyxVQUFDLE9BQWlCLElBQUssT0FBQSxjQUFZLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUE1QixDQUE0QixDQUFDO0tBQzVEO0lBRUQsSUFBSSx3QkFBd0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUMzQixJQUFBLG1DQUFhLEVBQUUsdUNBQWUsRUFBRSx5QkFBUSxDQUFXO1FBQzNELElBQU0sZ0JBQWdCLEdBQUcsZUFBZSxDQUFDLHVCQUF1QixDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ2hGLElBQU0sWUFBWSxHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUV2RCxrRUFBa0U7UUFDbEUsT0FBTyxzQkFBc0IsQ0FBQyxZQUFZLEVBQUUsTUFBTSxFQUFFLGVBQWUsQ0FBQyxDQUFDO0tBQ3RFO0FBQ0gsQ0FBQztBQUVELE1BQU0sVUFBVSx1QkFBdUIsQ0FDckMsZ0JBQThDLEVBQzlDLE1BQWMsRUFDZCxPQUdDO0lBRUQsSUFBSSxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1FBQ3pDLE9BQU8sZ0JBQWdCLENBQUMsTUFBTSxDQUFDO0tBQ2hDO0lBRUQsSUFBSSxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1FBQ3pDLE9BQU8sVUFBQyxLQUFjLEVBQUUsYUFBcUM7WUFDM0QsT0FBTyxPQUFPLGFBQWEsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ3RHLENBQUMsQ0FBQztLQUNIO0lBRUQsSUFBTSxRQUFRLEdBQ1osQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQztRQUNoQyxzQkFBc0IsQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNLEVBQUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUV2RixPQUFPLFVBQUMsS0FBYyxFQUFFLGFBQXFDO1FBQzNELElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUNyQixPQUFPLE9BQU8sYUFBYSxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7U0FDMUU7UUFFRCxPQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6QixDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBUeXBlLCBJbmplY3RvciwgVGVtcGxhdGVSZWYsIENvbXBvbmVudFJlZiwgTmdab25lIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgUmVuZGVyUHJvcENvbnRleHQsXHJcbiAgY3JlYXRlVGVtcGxhdGVSZW5kZXJlcixcclxuICBjcmVhdGVDb21wb25lbnRSZW5kZXJlcixcclxuICBjcmVhdGVIdG1sUmVuZGVyZXIsXHJcbiAgaXNSZW5kZXJQcm9wQ29udGV4dCxcclxufSBmcm9tICcuLi9yZW5kZXJlci9yZW5kZXJwcm9wLWhlbHBlcnMnO1xyXG5pbXBvcnQgeyBSZWFjdENvbnRlbnRQcm9wcyB9IGZyb20gJy4uL3JlbmRlcmVyL3JlYWN0LWNvbnRlbnQnO1xyXG5cclxuZXhwb3J0IHR5cGUgSnN4UmVuZGVyRnVuYzxUQ29udGV4dD4gPSAoY29udGV4dDogVENvbnRleHQpID0+IEpTWC5FbGVtZW50O1xyXG5cclxuLyoqXHJcbiAqIFJlbmRlciBwcm9wcyBvcHRpb25zIGZvciBjcmVhdGluZyAmIHJlbmRlcmluZyBhIGNvbXBvbmVudC5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyQ29tcG9uZW50T3B0aW9uczxUQ29udGV4dCBleHRlbmRzIG9iamVjdD4ge1xyXG4gIHJlYWRvbmx5IGNvbXBvbmVudFR5cGU6IFR5cGU8VENvbnRleHQ+O1xyXG4gIHJlYWRvbmx5IGZhY3RvcnlSZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyO1xyXG4gIHJlYWRvbmx5IGluamVjdG9yOiBJbmplY3RvcjtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNSZW5kZXJDb21wb25lbnRPcHRpb25zPFRDb250ZXh0IGV4dGVuZHMgb2JqZWN0Pih4OiB1bmtub3duKTogeCBpcyBSZW5kZXJDb21wb25lbnRPcHRpb25zPFRDb250ZXh0PiB7XHJcbiAgaWYgKHR5cGVvZiB4ICE9PSAnb2JqZWN0Jykge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWF5YmVSZW5kZXJDb21wb25lbnRPcHRpb25zID0geCBhcyBSZW5kZXJDb21wb25lbnRPcHRpb25zPFRDb250ZXh0PjtcclxuICByZXR1cm4gKFxyXG4gICAgbWF5YmVSZW5kZXJDb21wb25lbnRPcHRpb25zLmNvbXBvbmVudFR5cGUgIT0gbnVsbCAmJlxyXG4gICAgbWF5YmVSZW5kZXJDb21wb25lbnRPcHRpb25zLmZhY3RvcnlSZXNvbHZlciAhPSBudWxsICYmXHJcbiAgICBtYXliZVJlbmRlckNvbXBvbmVudE9wdGlvbnMuaW5qZWN0b3IgIT0gbnVsbFxyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbGxvdyBpbnRlcmNlcHRpbmcgYW5kIG1vZGlmeWluZyB0aGUgZGVmYXVsdCBwcm9wcywgd2hpY2ggYXJlIHRoZW4gdXNlZCBieSB0aGUgZGVmYXVsdCByZW5kZXJlci5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyUHJvcE9wdGlvbnM8VENvbnRleHQgZXh0ZW5kcyBvYmplY3Q+IHtcclxuICByZWFkb25seSBnZXRQcm9wczogKGRlZmF1bHRQcm9wcz86IFRDb250ZXh0KSA9PiBUQ29udGV4dDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNSZW5kZXJQcm9wT3B0aW9uczxUQ29udGV4dCBleHRlbmRzIG9iamVjdD4oeDogdW5rbm93bik6IHggaXMgUmVuZGVyUHJvcE9wdGlvbnM8VENvbnRleHQ+IHtcclxuICBpZiAodHlwZW9mIHggIT09ICdvYmplY3QnKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtYXliZVJlbmRlclByb3BPcHRpb25zID0geCBhcyBSZW5kZXJQcm9wT3B0aW9uczxUQ29udGV4dD47XHJcbiAgcmV0dXJuIG1heWJlUmVuZGVyUHJvcE9wdGlvbnMuZ2V0UHJvcHMgJiYgdHlwZW9mIG1heWJlUmVuZGVyUHJvcE9wdGlvbnMuZ2V0UHJvcHMgPT09ICdmdW5jdGlvbic7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYXJpb3VzIG9wdGlvbnMgZm9yIHBhc3NpbmcgcmVuZGVyZXJzIGFzIHJlbmRlciBwcm9wcy5cclxuICovXHJcbmV4cG9ydCB0eXBlIElucHV0UmVuZGVyZXJPcHRpb25zPFRDb250ZXh0IGV4dGVuZHMgb2JqZWN0PiA9XHJcbiAgfCBUZW1wbGF0ZVJlZjxUQ29udGV4dD5cclxuICB8ICgoY29udGV4dDogVENvbnRleHQpID0+IEhUTUxFbGVtZW50KVxyXG4gIHwgQ29tcG9uZW50UmVmPFRDb250ZXh0PlxyXG4gIHwgUmVuZGVyQ29tcG9uZW50T3B0aW9uczxUQ29udGV4dD5cclxuICB8IFJlbmRlclByb3BDb250ZXh0PFRDb250ZXh0PlxyXG4gIHwgUmVuZGVyUHJvcE9wdGlvbnM8VENvbnRleHQ+O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUlucHV0SnN4UmVuZGVyZXI8VENvbnRleHQgZXh0ZW5kcyBvYmplY3Q+KFxyXG4gIGlucHV0OiBJbnB1dFJlbmRlcmVyT3B0aW9uczxUQ29udGV4dD4sXHJcbiAgbmdab25lOiBOZ1pvbmUsXHJcbiAgYWRkaXRpb25hbFByb3BzPzogUmVhY3RDb250ZW50UHJvcHNcclxuKTogSnN4UmVuZGVyRnVuYzxUQ29udGV4dD4gfCB1bmRlZmluZWQge1xyXG4gIGlmIChpbnB1dCBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZVJlbmRlcmVyID0gY3JlYXRlVGVtcGxhdGVSZW5kZXJlcihpbnB1dCwgbmdab25lLCBhZGRpdGlvbmFsUHJvcHMpO1xyXG4gICAgcmV0dXJuIChjb250ZXh0OiBUQ29udGV4dCkgPT4gdGVtcGxhdGVSZW5kZXJlci5yZW5kZXIoY29udGV4dCk7XHJcbiAgfVxyXG5cclxuICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBDb21wb25lbnRSZWYpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudFJlbmRlcmVyID0gY3JlYXRlQ29tcG9uZW50UmVuZGVyZXIoaW5wdXQsIGFkZGl0aW9uYWxQcm9wcyk7XHJcbiAgICByZXR1cm4gKGNvbnRleHQ6IFRDb250ZXh0KSA9PiBjb21wb25lbnRSZW5kZXJlci5yZW5kZXIoY29udGV4dCk7XHJcbiAgfVxyXG5cclxuICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgY29uc3QgaHRtbFJlbmRlcmVyID0gY3JlYXRlSHRtbFJlbmRlcmVyKGlucHV0LCBhZGRpdGlvbmFsUHJvcHMpO1xyXG4gICAgcmV0dXJuIChjb250ZXh0OiBUQ29udGV4dCkgPT4gaHRtbFJlbmRlcmVyLnJlbmRlcihjb250ZXh0KTtcclxuICB9XHJcblxyXG4gIGlmIChpc1JlbmRlckNvbXBvbmVudE9wdGlvbnMoaW5wdXQpKSB7XHJcbiAgICBjb25zdCB7IGNvbXBvbmVudFR5cGUsIGZhY3RvcnlSZXNvbHZlciwgaW5qZWN0b3IgfSA9IGlucHV0O1xyXG4gICAgY29uc3QgY29tcG9uZW50RmFjdG9yeSA9IGZhY3RvcnlSZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShjb21wb25lbnRUeXBlKTtcclxuICAgIGNvbnN0IGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudEZhY3RvcnkuY3JlYXRlKGluamVjdG9yKTtcclxuXHJcbiAgICAvLyBDYWxsIHRoZSBmdW5jdGlvbiBhZ2FpbiB3aXRoIHRoZSBjcmVhdGVkIENvbXBvbmVudFJlZjxUQ29udGV4dD5cclxuICAgIHJldHVybiBjcmVhdGVJbnB1dEpzeFJlbmRlcmVyKGNvbXBvbmVudFJlZiwgbmdab25lLCBhZGRpdGlvbmFsUHJvcHMpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlclByb3BIYW5kbGVyPFRQcm9wcyBleHRlbmRzIG9iamVjdD4oXHJcbiAgcmVuZGVySW5wdXRWYWx1ZTogSW5wdXRSZW5kZXJlck9wdGlvbnM8VFByb3BzPixcclxuICBuZ1pvbmU6IE5nWm9uZSxcclxuICBvcHRpb25zPzoge1xyXG4gICAganN4UmVuZGVyZXI/OiBKc3hSZW5kZXJGdW5jPFRQcm9wcz47XHJcbiAgICBhZGRpdGlvbmFsUHJvcHM/OiBSZWFjdENvbnRlbnRQcm9wcztcclxuICB9XHJcbik6IChwcm9wcz86IFRQcm9wcywgZGVmYXVsdFJlbmRlcj86IEpzeFJlbmRlckZ1bmM8VFByb3BzPikgPT4gSlNYLkVsZW1lbnQgfCBudWxsIHtcclxuICBpZiAoaXNSZW5kZXJQcm9wQ29udGV4dChyZW5kZXJJbnB1dFZhbHVlKSkge1xyXG4gICAgcmV0dXJuIHJlbmRlcklucHV0VmFsdWUucmVuZGVyO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlzUmVuZGVyUHJvcE9wdGlvbnMocmVuZGVySW5wdXRWYWx1ZSkpIHtcclxuICAgIHJldHVybiAocHJvcHM/OiBUUHJvcHMsIGRlZmF1bHRSZW5kZXI/OiBKc3hSZW5kZXJGdW5jPFRQcm9wcz4pID0+IHtcclxuICAgICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0UmVuZGVyID09PSAnZnVuY3Rpb24nID8gZGVmYXVsdFJlbmRlcihyZW5kZXJJbnB1dFZhbHVlLmdldFByb3BzKHByb3BzKSkgOiBudWxsO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlbmRlcmVyID1cclxuICAgIChvcHRpb25zICYmIG9wdGlvbnMuanN4UmVuZGVyZXIpIHx8XHJcbiAgICBjcmVhdGVJbnB1dEpzeFJlbmRlcmVyKHJlbmRlcklucHV0VmFsdWUsIG5nWm9uZSwgb3B0aW9ucyAmJiBvcHRpb25zLmFkZGl0aW9uYWxQcm9wcyk7XHJcblxyXG4gIHJldHVybiAocHJvcHM/OiBUUHJvcHMsIGRlZmF1bHRSZW5kZXI/OiBKc3hSZW5kZXJGdW5jPFRQcm9wcz4pID0+IHtcclxuICAgIGlmICghcmVuZGVySW5wdXRWYWx1ZSkge1xyXG4gICAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRSZW5kZXIgPT09ICdmdW5jdGlvbicgPyBkZWZhdWx0UmVuZGVyKHByb3BzKSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlbmRlcmVyKHByb3BzKTtcclxuICB9O1xyXG59XHJcbiJdfQ==